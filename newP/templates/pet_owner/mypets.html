{% if user_loggedin %}	
	{% extends 'pet_owner/logout_layout.html' %}
{% else %}
	{% extends "pet_owner/login_layout.html" %}
{% endif %}

{% block content %}

      {% block breadcrumbs %}
      <ol class="breadcrumb mb-4">
          <li class="breadcrumb-item"><a href="/dashboard">Dashboard</a></li>
          <li class="breadcrumb-item active">All Pets</li>
      </ol>
      {% endblock breadcrumbs %}

         {% block admincontent %}

         {% set messages= get_flashed_messages() %}
         {% for m in messages %}
         <p class="alert alert-success"> {{ m }} </p>
         {% endfor %}


         <div class="card mb-4" style="margin-top: 2%;">
             <div class="card-header">
  The DataTable below shows all registered pets in our platform. Enjoy!
  <a href="/addpet" class="btn btn-outline-primary">Add Pet</a>
             </div>
         </div>
         <div class="card mb-4 container-fluid">
            
             <div class="card-body">
                <table class="table">
  <thead>
    <tr>
      <th scope="col">S/N</th>
      <th scope="col">Pet Name</th>
      <th scope="col">Category</th>
      <th scope="col">Breed</th>
      <th scope="col">Picture</th>
      <th scope="col">Status</th>
      <th scope="col">Date Created</th>
      <th scope="col">Gender</th>

    </tr>
  </thead>
  <tbody>

    {% for m in pets %}
    <tr>
      <th scope="row"> {{ loop.index}} </th>
      <td> {{ m.pet_name }} </td>
      <td> {{ m.catrelate.cat_name }} </td>
      <td> {{ m.pet_breed }} </td>
      
      <td><img src="{{url_for('static',filename='/collections/'+m.pet_pic) }}" height="100"> </td>

      <td> {{ m.pet_status }} </td>
      <td> {{ m.date_created }} </td>

      <td>       
          <a href="" class="btn btn-sm btn-success disabled"> {{m.pet_gender}}</a>

          <a href="/edit_pet/{{ m.pet_id }}" class="btn btn-sm btn-primary">Edit</a> 

          <a href="/pet_details/{{ m.pet_id }}" class="btn btn-sm btn-primary"> Details</a> 

          <a href="/book_appointment/{{ m.pet_id }}" class="btn btn-sm btn-primary">Book Appointment</a>

          <!-- show modal -->

          <button id="openModalBtn" class="btn btn-sm btn-danger .modal-lg"> Disable Pet 
              <div id="myModal" class="modal">
                  
                  <div class="modal-content">
                    <div class="modal-header" style="background-color: darkred;" > 
                      <h6> Tell us why you want to disable Pet </h6>
                    </div>
                      <span class="close">&times;</span>
                      <textarea name="disablepet" cols="30" rows="5"></textarea>
                      
                  </div>

                </button>

          <a href="/deletepet/{{ m.pet_id }}" onclick="return confirm('Are you sure you want to delete {{ m.pet_name }}?')" class="btn btn-sm btn-danger">Delete</a> 
          
        </td>
    </tr>
    {% endfor %}

  </tbody>
</table>
           </div>
            </div>

    {% endblock admincontent %}

<script type="text/javascript">

  // Get references to elements
const openModalBtn = document.getElementById("openModalBtn");
const modal = document.getElementById("myModal");
const closeBtn = document.getElementsByClassName("close")[0];

// Open the modal
openModalBtn.addEventListener("click", () => {
    modal.style.display = "block";
});

// Close the modal
closeBtn.addEventListener("click", () => {
    modal.style.display = "none";
});

// Close the modal if clicked outside the content
window.addEventListener("click", (event) => {
    if (event.target == modal) {
        modal.style.display = "none";
    }
});

</script>

{%endblock%}